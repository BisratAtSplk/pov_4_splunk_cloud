<dashboard theme="light" script="tokenlinks.js">
  <label>Getting Data In</label>
  <!-- Show/Hide Description Text -->
  <!-- Set Tokens from HTML Links Example -->
  <!--creates a hidden HTML row and panel in order to create an inline style sheet-->
  <!-- Welcome Message to GDI Dashboard -->
  <row>
    <panel>
      <html>
        <h2>
          <b>Welcome to the Getting Data In (GDI) Dashboard...</b>
        </h2>
<div class="panel conf-macro output-block" data-hasbody="true" data-macro-name="panel">
<div class="panelContent">
<p>Welcome <b>$env:user_realname$</b> ! This GDI dashboard is meant to provide you guidance and feedback on the GDI process for your Proof of Value experience. If you are doing an Autobahn Proof of Value then you can largely ignore this dashboard. The Autobahn engineer assigned will be doing the data onboarding for you.</p>
<p>
              <em>Alan Ivarson, Cloud Architect</em>
            </p>
</div>
</div>
        </html>
    </panel>
    <panel>
      <html>
                <!-- Set the $show_docs$ token when the link is clicked, also unset the $show_kpis$ token -->
                <a href="#" class="btn-pill" data-set-token="show_docs" data-value="show" data-unset-token="show_kpis">
                    Show Docs and Reference Links
                </a>
                <!-- Set the $show_kpis$ token when the link is clicked, also unset the $show_docs$ token -->
                <a href="#" class="btn-pill" data-set-token="show_kpis" data-value="show" data-unset-token="show_docs">
                    Show KPIs
                </a>
                <!-- Unset both the $show_docs$ and $show_kpis$ token when the link is clicked -->
                <a href="#" class="btn-pill" data-token-json="{&quot;show_kpis&quot;: null, &quot;show_docs&quot;: null}">Hide All</a>
                <!-- Unset all tokens -->
                <a href="#" class="btn-pill" data-token-json="{&quot;show_st_charts&quot;: null, &quot;show_size_charts&quot;: null, &quot;show_hosts_charts&quot;: null, &quot;show_events_charts&quot;: null, &quot;show_index_charts&quot;: null, &quot;show_fwd_charts&quot;: null, &quot;show_kpis&quot;: null, &quot;show_docs&quot;: null}">Reset Dashboard</a>
      </html>
      <html rejects="$show_docs$, $show_kpis$">
            <p>Click on one of the links above to select which visualization to show.</p>
        </html>
    </panel>
  </row>
  <row depends="$hide$">
    <panel>
      <html>
        <style>
          <!-- Table Layout and colors-->
          #kpi_table {
          border-collapse: collapse;
          width: 100%;
          table-layout: auto;
          }
          
          #kpi_table td, #kpi_table th {
            border: 1px solid #ddd;
            padding: 8px;
          }
          
          #kpi_table tr:nth-child(even){background-color: #f2f2f2;}
          
          #kpi_table tr:hover {background-color: #ddd;}
          
          #kpi_table th {
            padding-top: 12px;
            padding-bottom: 12px;
            text-align: left;
            background-color: #4CAF50;
            color: white;}
            
            #splk_banner {
              opacity: 1 !important;
              background: linear-gradient(80deg, #E90080 14%, #de0275 14% 22%, #e72B56 22% 25%, #de0275 50%, #f14d42 90%, #f05939 90% 93%,  #F4891a 93.1%);
              color: white !important;              
              text-align: center;              
              line-height: 120px;              
              font-size: 80px;              
              padding: 1px;              
              height: 120px;
              }
            
        </style>
      </html>
    </panel>
  </row>
  <row>
    <panel depends="$show_docs$">
      <html>
        <p>
          <b> Resources:</b>
        </p>
        <ul>
        <li>
            <a href="https://conf.splunk.com/files/2019/slides/FN1561.pdf">Data Onboarding Where do I begin? | 2019 .conf Preso by Luke Netto, Splunk PS</a>
          </li>
          <li>
            <a href="https://docs.splunk.com/Documentation/SplunkCloud/latest/Data/Howdoyouwanttoadddata">Splunk Cloud Getting Data In Docs</a>
          </li>
                    <li>
            <a href="https://docs.splunk.com/Documentation/SplunkCloud/latest/User/ManageIndexes#Best_practices_for_creating_indexes">Best Practices for Creating Indexes in Splunk Cloud</a>
          </li>
          <p/>
          </ul>
          <p>
          <b>Quick Links inside your stack:</b>
        </p>
          <ul>
          <li>
            <a href="/manager/search/data/indexes">Create an Index in your Cloud Stack</a>
          </li>
          <li>
            <a href="app/splunkclouduf/setupuf">Universal Forwarder App for your Cloud Stack</a>
          </li>

</ul>
     </html>
    </panel>
  </row>
  <row>
    <panel depends="$show_kpis$">
      <html>
        <table id="kpi_table">
          <tr>
            <th>KPI</th>
            <th>Description</th>
        </tr>
        <tr>
            <b>Here is a listing of the KPIs that are measured on this dashboard and why they are important.</b>
        </tr>
        <tr>
            <td>
              <b># of Indexes created</b>
            </td>
			      <td> The number of indexes created in Splunk Cloud. This tracks if the POV is following best practices to not send data to the default indexes. 1 or more are needed to get this KPI to turn green.</td>
		    </tr>
        <tr>
            <td>
              <b># of Forwarders connected</b>
            </td>
			      <td> The total number of forwarders that have sent data to Splunk Cloud. A forwarder is the primary method to get data in to Splunk Cloud. 1 or more forwarders sending data are needed to get this KPI to turn green.</td>
		    </tr>
		    <tr>
            <td>
              <b># of Events in Splunk Cloud</b>
            </td>
			      <td> The total number of events currently in Splunk Cloud. This is a measure of the volume of data coming into Splunk. 1 Million events or more are needed to get this KPI to turn green.</td>
		    </tr>
		    <tr>
            <td>
              <b>GB/day of data</b>
            </td>
			      <td> Splunk ingest licensing measures GB of data per day. This is a measure of how much data you are using. 10gb/day or greater is needed to get this KPI to turn green.</td>
		    </tr>
        <tr>
            <td>
              <b># of Sourcetypes onboarded</b>
            </td>
			      <td> A sourcetype is a default field that identifies the data structure of an event. This measures the variety of data coming into Splunk Cloud. 5 or more sourcetypes are needed to get this KPI to turn green.</td>
		    </tr>
		    <tr>
            <td>
              <b># of Hosts sending data</b>
            </td>
			      <td> A default field that contains the hostname or IP address of the device that generated the event. This measures the variety of data coming into Splunk Cloud. 4 or more hosts sending data are needed to get this KPI to turn green.</td>
		    </tr>
		    <tr>
            <td>
              <b>Data Quality</b>
            </td>
			      <td> This KPI measures the quality of the data coming in. Garbage in, Garbage out. We are looking for things like no too_small sourcetypes, CIM data, no data in lastchanceindex, etc.</td>
		    </tr>
        </table>
      </html>
    </panel>
  </row>
  <row>
    <panel>
      <html>
    <h1 id="splk_banner">GDI SUMMARY</h1>
</html>
    </panel>
  </row>
  <row>
    <panel>
      <title># of Indexes Created</title>
      <single>
        <search>
          <query>| eventcount index=* summarize=false 
| search NOT 
    [| inputlookup default_indexes 
    | fields index 
    | format] 
| where NOT match(index, "^_") 
| stats dc(index) as indexes</query>
          <earliest>0</earliest>
          <latest></latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="colorMode">block</option>
        <option name="drilldown">all</option>
        <option name="rangeColors">["0x006d9c","0x53a051"]</option>
        <option name="rangeValues">[0]</option>
        <option name="refresh.display">progressbar</option>
        <option name="useColors">1</option>
        <drilldown>
          <!-- For the sourcetype field clicked: -->
          <!-- Set token to display a chart -->
          <set token="show_index_charts"></set>
          <unset token="show_fwd_charts"></unset>
          <unset token="show_size_charts"></unset>
          <unset token="show_hosts_charts"></unset>
          <unset token="show_st_charts"></unset>
          <unset token="show_events_charts"></unset>
        </drilldown>
      </single>
    </panel>
    <panel>
      <title>Forwarders Connected</title>
      <single>
        <search>
          <query>index=_internal sourcetype=splunkd group=tcpin_connections (connectionType=cooked OR connectionType=cookedSSL) NOT eventType=* 
| eval forwarder = guid 
| timechart span=1h dc(forwarder) as count_forwarder 
| fields count_forwarder</query>
          <earliest>-1h</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="colorBy">value</option>
        <option name="colorMode">block</option>
        <option name="drilldown">all</option>
        <option name="numberPrecision">0</option>
        <option name="rangeColors">["0x006d9c","0x53a051"]</option>
        <option name="rangeValues">[0]</option>
        <option name="refresh.display">progressbar</option>
        <option name="showSparkline">1</option>
        <option name="showTrendIndicator">1</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
        <option name="trendColorInterpretation">standard</option>
        <option name="trendDisplayMode">absolute</option>
        <option name="trendInterval">-24h</option>
        <option name="underLabel">Compared to 1h before</option>
        <option name="unitPosition">after</option>
        <option name="useColors">1</option>
        <option name="useThousandSeparators">1</option>
        <drilldown>
          <!-- For the sourcetype field clicked: -->
          <!-- Set token to display a chart -->
          <set token="show_fwd_charts"></set>
          <unset token="show_index_charts"></unset>
          <unset token="show_size_charts"></unset>
          <unset token="show_hosts_charts"></unset>
          <unset token="show_st_charts"></unset>
          <unset token="show_events_charts"></unset>
        </drilldown>
      </single>
    </panel>
    <panel>
      <title>Events (All time)</title>
      <single>
        <search>
          <query>| eventcount summarize=false index=*
| stats sum(count) as "Total Events"</query>
          <earliest>0</earliest>
          <latest></latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="colorBy">value</option>
        <option name="colorMode">block</option>
        <option name="drilldown">all</option>
        <option name="numberPrecision">0</option>
        <option name="rangeColors">["0xdc4e41","0x53a051"]</option>
        <option name="rangeValues">[0]</option>
        <option name="refresh.display">progressbar</option>
        <option name="showSparkline">1</option>
        <option name="showTrendIndicator">1</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
        <option name="trendColorInterpretation">standard</option>
        <option name="trendDisplayMode">absolute</option>
        <option name="underLabel">INDEXED</option>
        <option name="unit">Events</option>
        <option name="unitPosition">after</option>
        <option name="useColors">1</option>
        <option name="useThousandSeparators">1</option>
        <drilldown>
          <!-- For the sourcetype field clicked: -->
          <!-- Set token to display a chart -->
          <set token="show_events_charts"></set>
          <unset token="show_fwd_charts"></unset>
          <unset token="show_size_charts"></unset>
          <unset token="show_hosts_charts"></unset>
          <unset token="show_st_charts"></unset>
          <unset token="show_index_charts"></unset>
        </drilldown>
      </single>
    </panel>
    <panel>
      <title>Data Onboarded (per day)</title>
      <single>
        <search>
          <query>| dbinspect index=* cached=t 
| where NOT match(index, "^_") 
| dedup bucketId sortby - modTime 
| stats max(rawSize) AS raw_size max(eventCount) AS event_count BY bucketId, index 
| stats sum(raw_size) AS raw_size sum(event_count) AS event_count dc(bucketId) AS buckets BY index 
| eval raw_size_gb = round(raw_size / 1024/ 1024/ 1024 , 2) 
| fields index raw_size_gb event_count buckets 
| stats sum(raw_size_gb) as total_gb
| eval total_gb = total_gb/30</query>
          <earliest>-30d@d</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <drilldown>
          <!-- For the sourcetype field clicked: -->
          <!-- Set token to display a chart -->
          <set token="show_size_charts"></set>
          <unset token="show_hosts_charts"></unset>
          <unset token="show_st_charts"></unset>
          <unset token="show_fwd_charts"></unset>
          <unset token="show_index_charts"></unset>
          <unset token="show_events_charts"></unset>
        </drilldown>
        <option name="colorBy">value</option>
        <option name="colorMode">block</option>
        <option name="numberPrecision">0.00</option>
        <option name="rangeColors">["0x006d9c","0xdc4e41","0xf1813f","0x53a051"]</option>
        <option name="rangeValues">[0,2,10]</option>
        <option name="refresh.display">progressbar</option>
        <option name="showSparkline">1</option>
        <option name="showTrendIndicator">1</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
        <option name="trendColorInterpretation">standard</option>
        <option name="trendDisplayMode">absolute</option>
        <option name="unit">GB</option>
        <option name="unitPosition">after</option>
        <option name="useColors">1</option>
        <option name="useThousandSeparators">1</option>
      </single>
    </panel>
    <panel>
      <title>Sourcetypes (All time)</title>
      <single>
        <search>
          <query>| inputlookup stack_sourcetypes.csv
| dedup sourcetype
| stats count(sourcetype) as sourcetypes</query>
          <earliest>-30d@d</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <drilldown>
          <!-- For the sourcetype field clicked: -->
          <!-- Set token to display a chart -->
          <set token="show_st_charts"></set>
          <unset token="show_hosts_charts"></unset>
          <unset token="show_size_charts"></unset>
          <unset token="show_fwd_charts"></unset>
          <unset token="show_index_charts"></unset>
          <unset token="show_events_charts"></unset>
        </drilldown>
        <option name="colorBy">value</option>
        <option name="colorMode">block</option>
        <option name="numberPrecision">0</option>
        <option name="rangeColors">["0x006d9c","0xdc4e41","0xf1813f","0x53a051"]</option>
        <option name="rangeValues">[1,2,4]</option>
        <option name="showSparkline">1</option>
        <option name="showTrendIndicator">1</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
        <option name="trendColorInterpretation">standard</option>
        <option name="trendDisplayMode">absolute</option>
        <option name="unitPosition">after</option>
        <option name="useColors">1</option>
        <option name="useThousandSeparators">1</option>
      </single>
    </panel>
    <panel>
      <title>Hosts (30d)</title>
      <single>
        <search>
          <query>| metadata type=hosts
| where NOT match(host,"(.splunkcloud*.com|idm-i.*|sh-i-.*|idx-i-.*|c0m1-i-.*)")
| stats dc(host) as hosts</query>
          <earliest>-30d@d</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <drilldown>
          <!-- For the sourcetype field clicked: -->
          <!-- Set token to display a chart -->
          <set token="show_hosts_charts"></set>
          <unset token="show_size_charts"></unset>
          <unset token="show_st_charts"></unset>
          <unset token="show_fwd_charts"></unset>
          <unset token="show_index_charts"></unset>
          <unset token="show_events_charts"></unset>
        </drilldown>
        <option name="colorBy">value</option>
        <option name="colorMode">block</option>
        <option name="numberPrecision">0</option>
        <option name="rangeColors">["0x006d9c","0xf1813f","0xf8be34","0x53a051"]</option>
        <option name="rangeValues">[0,2,4]</option>
        <option name="showSparkline">1</option>
        <option name="showTrendIndicator">1</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
        <option name="trendColorInterpretation">standard</option>
        <option name="trendDisplayMode">absolute</option>
        <option name="unitPosition">after</option>
        <option name="useColors">1</option>
        <option name="useThousandSeparators">1</option>
      </single>
    </panel>
  </row>
  <row>
    <panel>
      <title>HEC Tokens in Use (30d)</title>
      <single>
        <search>
          <query>index=_introspection sourcetype=http_event_collector_metrics data.token_name=* 
| rename data.* as * 
| chart sparkline count by token_name 
| search token_name=* 
| rename token_name as "HEC Tokens", sparkline as Trend, count as Count
| stats dc("HEC Tokens") as "HEC Tokens in use"</query>
          <earliest>-30d@d</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="colorBy">value</option>
        <option name="colorMode">block</option>
        <option name="drilldown">none</option>
        <option name="numberPrecision">0</option>
        <option name="rangeColors">["0x006d9c","0x53a051"]</option>
        <option name="rangeValues">[0]</option>
        <option name="showSparkline">1</option>
        <option name="showTrendIndicator">1</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
        <option name="trendColorInterpretation">standard</option>
        <option name="trendDisplayMode">absolute</option>
        <option name="unitPosition">after</option>
        <option name="useColors">1</option>
        <option name="useThousandSeparators">1</option>
      </single>
    </panel>
    <panel>
      <title>IDM inputs (30d)</title>
      <single>
        <search>
          <query>index=_* host="idm*.splunkcloud*.com" sourcetype=*:log 
| stats dc(sourcetype) as "Number of Inputs on IDM"</query>
          <earliest>-30d@d</earliest>
          <latest>now</latest>
        </search>
        <option name="colorMode">block</option>
        <option name="drilldown">none</option>
        <option name="rangeColors">["0x006d9c","0x53a051"]</option>
        <option name="rangeValues">[0]</option>
        <option name="refresh.display">progressbar</option>
        <option name="useColors">1</option>
      </single>
    </panel>
  </row>
  <row>
    <panel depends="$show_st_charts$">
      <title>Top 10 Sourcetypes by Event Count (30d)</title>
      <chart>
        <search>
          <query>| inputlookup stack_sourcetypes.csv
| stats sum(totalCount) as Events by sourcetype
| sort -Events
| head 10</query>
          <earliest>-30d@d</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">collapsed</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.abbreviation">none</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.abbreviation">none</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.abbreviation">none</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">bar</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.mode">standard</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.lineWidth">2</option>
        <option name="refresh.display">progressbar</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
      </chart>
    </panel>
    <panel depends="$show_st_charts$">
      <title>Top 10 Sourcetypes by Size (30d)</title>
      <table>
        <search>
          <query>index=_internal sourcetype=splunkd st=* source="*/var/log/splunk/license_usage.log"
| stats sum(b) as bytes by st
| eval Size=`format_bytes(bytes)`
| sort -bytes
| rename st as "Source Type"
| table "Source Type", Size
| head 10</query>
          <earliest>-30d@d</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="count">100</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">none</option>
        <option name="percentagesRow">false</option>
        <option name="refresh.display">progressbar</option>
        <option name="rowNumbers">true</option>
        <option name="totalsRow">false</option>
        <option name="wrap">true</option>
      </table>
    </panel>
  </row>
  <row>
    <panel depends="$show_hosts_charts$">
      <title>Hosts in Splunk (90d)</title>
      <table>
        <search>
          <query>| metadata type=hosts
| where NOT match(host,"(.splunkcloud*.com|idm-i.*|sh-i-.*|idx-i-.*|c0m1-i-.*)")
| table host</query>
          <earliest>-90d</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="count">20</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">none</option>
        <option name="percentagesRow">false</option>
        <option name="refresh.display">progressbar</option>
        <option name="rowNumbers">true</option>
        <option name="totalsRow">false</option>
        <option name="wrap">true</option>
      </table>
    </panel>
  </row>
  <row>
    <panel depends="$show_size_charts$">
      <title>Daily License Usage in GB</title>
      <chart>
        <search>
          <query>index=_telemetry (host=*.*splunk*.* NOT host=sh*.*splunk*.*) source=*license_usage_summary.log* type="RolloverSummary" 
| bin _time span=1d 
| stats latest(b) AS b by slave, pool, _time 
| timechart span=1d sum(b) AS "volume" fixedrange=true 
| eval GB=round(volume/1024/1024/1024,2) 
| eval "GB/Day"=GB 
| fields - GB volume</query>
          <earliest>-30d@d</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.abbreviation">none</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.abbreviation">none</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.abbreviation">none</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.overlayFields">"Average GB"</option>
        <option name="charting.chart.showDataLabels">all</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">1</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.mode">standard</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.lineWidth">2</option>
        <option name="refresh.display">progressbar</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
      </chart>
    </panel>
    <panel depends="$show_size_charts$">
      <title>Total Incoming MB per Hour (24h)</title>
      <chart>
        <search>
          <query>index=_internal source=/opt/splunk/var/log/splunk/license_usage.log* type=Usage earliest=-25h@h latest=-h@h
| eval MB=round(b / 1024 / 1024 , 2)
| timechart span=1h sum(MB) AS totalMB</query>
          <earliest>-30m@m</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.abbreviation">none</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.abbreviation">none</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.abbreviation">none</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">all</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.mode">standard</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.lineWidth">2</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
      </chart>
    </panel>
    <panel depends="$show_size_charts$">
      <title>Top 10 Index Sizes (30d)</title>
      <chart>
        <search>
          <query>| dbinspect index=* cached=t 
| where NOT match(index, "^_") 
| dedup bucketId sortby - modTime 
| stats max(rawSize) AS raw_size max(eventCount) AS event_count BY bucketId, index 
| stats sum(raw_size) AS raw_size sum(event_count) AS event_count dc(bucketId) AS buckets BY index 
| eval raw_size_gb = round(raw_size / 1024/ 1024/ 1024 , 2) 
| stats sum(raw_size_gb) as "Index Size (GB)" by index
| sort - "Index Size (GB)"
| head 10</query>
          <earliest>-30d@d</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisLabelsY.majorUnit">5</option>
        <option name="charting.axisLabelsY2.majorUnit">5</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.abbreviation">none</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.abbreviation">auto</option>
        <option name="charting.axisY.minimumNumber">.25</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.abbreviation">none</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.minimumNumber">.5</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">bar</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">all</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.mode">standard</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.lineWidth">2</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel depends="$show_events_charts$">
      <title>EPM and Average EPS (1h)</title>
      <chart>
        <search>
          <query>index=* 
| timechart count as "events per minute"
| eventstats sum(eval('events per minute'/3600)) as "average events per second"</query>
          <earliest>-60m@m</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.text">eps</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.abbreviation">none</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.abbreviation">none</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.abbreviation">none</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.overlayFields">"average events per second"</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.mode">standard</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.lineWidth">2</option>
        <option name="refresh.display">progressbar</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel depends="$show_events_charts$">
      <title>Earliest Event Indexed</title>
      <single>
        <search>
          <query>| metadata type=sourcetypes index=*
| eval "Earliest Event"=strftime(firstTime,"%m/%d/%Y %I:%M:%S %p")
| sort +firstTime
| table "Earliest Event"
| head 1</query>
          <earliest>0</earliest>
          <latest></latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="colorBy">value</option>
        <option name="colorMode">none</option>
        <option name="drilldown">none</option>
        <option name="numberPrecision">0</option>
        <option name="rangeColors">["0x53a051","0xdc4e41"]</option>
        <option name="rangeValues">[0]</option>
        <option name="refresh.display">progressbar</option>
        <option name="showSparkline">1</option>
        <option name="showTrendIndicator">1</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
        <option name="trendColorInterpretation">standard</option>
        <option name="trendDisplayMode">absolute</option>
        <option name="unitPosition">after</option>
        <option name="useColors">0</option>
        <option name="useThousandSeparators">1</option>
      </single>
    </panel>
    <panel depends="$show_events_charts$">
      <title>Latest Event Indexed</title>
      <single>
        <search>
          <query>| metadata type=sourcetypes index=*
| eval "Latest Event"=strftime(lastTime,"%m/%d/%Y %I:%M:%S %p")
| sort -lastTime
| table "Latest Event"
| head 1</query>
          <earliest>0</earliest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="colorMode">block</option>
        <option name="drilldown">none</option>
        <option name="rangeColors">["0x53a051","0xdc4e41"]</option>
        <option name="rangeValues">[0]</option>
        <option name="useColors">0</option>
      </single>
    </panel>
  </row>
  <row>
    <panel depends="$show_index_charts$">
      <title>Indexes with Events (All time)</title>
      <table>
        <search>
          <query>| dbinspect index=* cached=t 
| search NOT 
    [| inputlookup default_indexes 
    | fields index 
    | format] 
| where NOT match(index, "^_") 
| dedup bucketId sortby - modTime 
| stats max(rawSize) AS raw_size max(eventCount) AS event_count BY bucketId, index 
| stats sum(raw_size) AS raw_size sum(event_count) AS event_count dc(bucketId) AS buckets BY index 
| eval raw_size_gb = round(raw_size / 1024/ 1024/ 1024 , 2) 
| eval event_count = tostring(event_count, "commas")
| fields index raw_size_gb event_count
| rename raw_size_gb AS "Index Size (GB)" event_count AS "Total Event Count"
| sort - "Index Size (GB)"</query>
          <earliest>0</earliest>
          <latest></latest>
        </search>
        <option name="count">20</option>
        <option name="drilldown">none</option>
        <option name="rowNumbers">true</option>
      </table>
    </panel>
    <panel depends="$show_fwd_charts$">
      <title>Forwarders connecting over 30d</title>
      <chart>
        <search>
          <query>index=_internal sourcetype=splunkd group=tcpin_connections (connectionType=cooked OR connectionType=cookedSSL) NOT eventType=* 
| eval forwarder = guid 
| timechart dc(forwarder) as "Forwarder Count" span=1d</query>
          <earliest>-30d@d</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.abbreviation">none</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.abbreviation">none</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.abbreviation">none</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">area</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.mode">standard</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.lineWidth">2</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
      </chart>
    </panel>
  </row>
</dashboard>